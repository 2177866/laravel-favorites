# Laravel Favorites
[![Latest Stable Version](https://img.shields.io/packagist/v/alyakin/favorites.svg?style=flat-square)](https://packagist.org/packages/alyakin/favorites)
[![Latest Unstable Version](https://img.shields.io/packagist/vpre/alyakin/favorites.svg?style=flat-square)](https://packagist.org/packages/alyakin/favorites)
[![Total Downloads](https://img.shields.io/packagist/dt/alyakin/favorites.svg?style=flat-square)](https://packagist.org/packages/alyakin/favorites)
[![Laravel Version](https://img.shields.io/badge/laravel-8+-orange.svg?style=flat-square)](https://laravel.com)
[![PHP Version](https://img.shields.io/badge/php-8.1+-blue.svg?style=flat-square)](https://php.net)
[![License](https://img.shields.io/github/license/2177866/laravel-favorites.svg?style=flat-square)](LICENSE)
[![Tests](https://github.com/2177866/laravel-favorites/actions/workflows/favorites-tests.yml/badge.svg)](https://github.com/2177866/laravel-favorites/actions)

## üì¶ –û–ø–∏—Å–∞–Ω–∏–µ

`Laravel Favorites` ‚Äî —ç—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã—Ö —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∏ –ª—é–±—ã–º–∏ –∏–∑–±–∏—Ä–∞–µ–º—ã–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏.
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–º—É –≤–ª–∞–¥–µ–ª—å—Ü—É (–ø—Ä–æ—Ñ–∏–ª—é, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ —Ç.–ø.) –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –æ–±—ä–µ–∫—Ç—ã —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ç–æ–≤–∞—Ä—ã, —Å—Ç–∞—Ç—å–∏, –ø—Ä–æ—Ñ–∏–ª–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –¥—Ä.

–ü–∞–∫–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–æ –ø–∞–ø–∫–∞–º —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏,
- —Ä–∞–±–æ—Ç—É —Å UUID –∏ timestamps "–∏–∑ –∫–æ—Ä–æ–±–∫–∏",
- —Å—Ç—Ä–æ–≥—É—é –ø—Ä–∏–≤—è–∑–∫—É –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–ª–∞–¥–µ–ª—å—Ü—É.

## üéØ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è

- üíº **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏** ‚Äî –ø–æ–∫—É–ø–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –±—Ä–µ–Ω–¥—ã –∏–ª–∏ –ø–æ–¥–±–æ—Ä–∫–∏.
- üìö **–ö–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞—Ç—Ñ–æ—Ä–º** ‚Äî —á–∏—Ç–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ —Å—Ç–∞—Ç—å–∏, –∞–≤—Ç–æ—Ä–æ–≤ –∏–ª–∏ —Ö–µ—à—Ç–µ–≥–∏.
- üìä **B2B/CRM —Å–∏—Å—Ç–µ–º** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤, –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–ª–∏ —Å–¥–µ–ª–∫–∏ –≤ "–∏–∑–±—Ä–∞–Ω–Ω–æ–µ" –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

## üß≠ –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Å–∏—Å—Ç–µ–º–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å](#-–∫–∞–∫-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
  - [‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ](#-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–≤-–∏–∑–±—Ä–∞–Ω–Ω–æ–µ)
  - [‚ûñ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ](#-—É–¥–∞–ª–µ–Ω–∏–µ-–∏–∑-–∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ)
  - [üìÇ –†–∞–±–æ—Ç–∞ —Å –ø–∞–ø–∫–∞–º–∏](#-—Ä–∞–±–æ—Ç–∞-—Å-–ø–∞–ø–∫–∞–º–∏)
  - [üìÑ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ](#-–ø–æ–ª—É—á–µ–Ω–∏–µ-–∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ)
- [–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è](#-–∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è)
  - [üîÑ –ü—Ä–∏–º–µ—Ä: –∑–∞–º–µ–Ω–∞ –ª–æ–≥–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è](#-–ø—Ä–∏–º–µ—Ä-–∑–∞–º–µ–Ω–∞-–ª–æ–≥–∏–∫–∏-–¥–æ–±–∞–≤–ª–µ–Ω–∏—è)
- [ü§ù –°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ](#-—Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ)
- [üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

## üõ† –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP **8.1** –∏–ª–∏ –≤—ã—à–µ
- Laravel **10.x** –∏–ª–∏ –≤—ã—à–µ
- Composer –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç —á–µ—Ä–µ–∑ Composer:

```bash
composer require alyakin/favorites
```

–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Äî –º–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

## ‚öôÔ∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–°–µ—Ä–≤–∏—Å—ã –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Laravel:

```php
use \Alyakin\Favorites\Services\{FavoriteService, FavoriteFolderService};

$favoritesService = app(FavoriteService::class);
$folderService = app(FavoriteFolderService::class);
```

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

```php
// –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
$favoritesService->addToFavorites($ownerId, $model);

// –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–∞–ø–∫—É:
$favoritesService->addToFavorites($ownerId, $model, 'read later');
```

### ‚ûñ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

```php
// –£–¥–∞–ª–∏—Ç—å –æ–±—ä–µ–∫—Ç –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:
$favoritesService->removeFromFavorites($ownerId, $model);
```

### üìÇ –†–∞–±–æ—Ç–∞ —Å –ø–∞–ø–∫–∞–º–∏

```php
// –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É
$folderService->createFolder($ownerId, '–ü–∞–ø–∫–∞');

// –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–∞–ø–∫—É
$folderService->renameFolder($ownerId, $folderId, $newName);

// –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≤ –ø–∞–ø–∫—É:
$favoritesService->moveToFolder($favoriteId, $folderId);

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–∞–ø–∫–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞:
$folderService->getAllFoldersForOwner($ownerId);

// –£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É:
// ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï! –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–∞–ø–∫–∏ –±—É–¥—É—Ç —Ç–∞–∫–∂–µ —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë.
$folderService->deleteFolder($ownerId, $folderId);
```

### üìÑ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

```php
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–ª–∞–¥–µ–ª—å—Ü–∞:
$favoritesService->getFavorites($ownerId);

// –ü–æ–ª—É—á–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞–ø–∫–µ:
$favoritesService->getFavorites($ownerId, 'funy');

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –æ–±—ä–µ–∫—Ç –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º:
$favoritesService->isFavorited($ownerId, $model);
```

## üéõ –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

–ü–∞–∫–µ—Ç —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Å —É—á–µ—Ç–æ–º —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥ –ø—Ä–æ–µ–∫—Ç.

- –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–∞, –ø–µ—Ä–µ–¥–∞–≤–∞—è –ª—é–±–æ–π UUID-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π `ownerId`.
- –ü–∞–ø–∫–∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ –±–µ–∑ –Ω–∏—Ö.
- –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö (`FavoriteService`, `FavoriteFolderService`) –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –∏–ª–∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
- –ù–∞–∑–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü, —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ –∫–ª—é—á–µ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–±—â–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Laravel –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

### üîÑ –ü—Ä–∏–º–µ—Ä: –∑–∞–º–µ–Ω–∞ –ª–æ–≥–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å:

```php
class CustomFavoriteService extends \Alyakin\Favorites\Services\FavoriteService {
    // ...
}
```

–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –Ω—É–∂–Ω—ã–π –º–µ—Ç–æ–¥:

```php
public function addToFavorites(string $ownerId, Model $model, ?string $folderName = null): Favorite
{
    // —Å–≤–æ—è –ª–æ–≥–∏–∫–∞ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
    \Log::info('–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ', ['owner_id' => $ownerId]);

    return parent::addToFavorites($ownerId, $model, $folderName);
}
```

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ AppServiceProvider:

```php
$this->app->bind(
    \Alyakin\Favorites\Services\FavoriteService::class,
    \App\Services\CustomFavoriteService::class
);
```

–¢–µ–ø–µ—Ä—å Laravel –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤–º–µ—Å—Ç–æ –±–∞–∑–æ–≤–æ–π.

## ü§ù –°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ

–ú—ã –æ—Ç–∫—Ä—ã—Ç—ã –∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –∏ —É–ª—É—á—à–µ–Ω–∏—è–º!

- –°–æ–æ–±—â–∞–π—Ç–µ –æ–± –æ—à–∏–±–∫–∞—Ö —á–µ—Ä–µ–∑ [Issues](https://github.com/2177866/laravel-favorites/issues)
- –ü—Ä–∏—Å—ã–ª–∞–π—Ç–µ Pull Requests —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏
- –ü—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ –∏–¥–µ–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

This package is open-source and available under the [MIT License](LICENSE).